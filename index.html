<!DOCTYPE html>
<html>
  <head>
  
   <link rel="stylesheet" href='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.css' />
   
     <script src='https://api.mapbox.com/mapbox.js/v2.2.1/mapbox.js'></script>
    <script src='http://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.0.1/leaflet-omnivore.min.js'></script>

	 <title>Amazing Map</title>
	 
	 <style>
      body { margin:0; padding:0; }
      #map { position: absolute; top: 60px; bottom: 0; width:700px; }
    </style>
	
	</head>
  <body>
  
   <h2>My Map</h2>

    <div id='map'></div>
	
	<!--Below this container, we are going to put the Javascript that calls the map, adds the data points, and styles the popups. Tells computer we're not speakign HTML, now we're speaking JavaScript-->
	 <script type="text/javascript">
	 
	 //This is the most simple way to call a map, but there are other options that use other open source tools, such as Leaflet. Mapbox requires a public key. In your own mapbox, look for copy access code to clipboard, which is in the upper right corner
        L.mapbox.accessToken = 'pk.eyJ1IjoibWF0cml4LW1zdSIsImEiOiJmU1NPbUFjIn0.MWCWCMSJ8Ar-6KZtNPzy4w';
        var map = L.mapbox.map('map', 'matrix-msu.n77if505', {minZoom: 3});
	//For the variable map, put it in the mapbox div container, and add map id
	
	//Omnivore - points to information in another file that will then be accessible to the map as a layer. You can grab from your own files, or also from another domain/website. Requires your domain to be able to do AJAX requets
	 var points = omnivore.csv(
          'data.csv')
		  
		//This next bit of code tells the page to style the data in the way that we want, such as adding a popup on each point.  When the map loads, bring up the particular layer with markers, and for each marker, bring up a popup box. Omnivore will not work if there are spaces in your data, especially in the geolocations
        .on('ready', function(layer){
          this.eachLayer(function(marker) {
            marker.bindPopup(
			//Here we tell the page what from the data will go into each popup, based on the column names from the data, where the last string on the line (before the + sign) is the column name. I have also added some html tags to style the popup, so it isn't boring text, which goes in between quotes (single or double, but be consistent and alternate if using inside nested (see line 81)]. Look for element inspection tools for your browser. Last <div> is a clear container, which means nothing else can go next to that popup.
			              '<h3>' + marker.toGeoJSON().properties.from_user + '</h3>' +
              '<img style="float: left; width: 100px; padding: 5px; margin-right: 5px" src=' + marker.toGeoJSON().properties.profile_image_url + ' />' +
              '<p>' + marker.toGeoJSON().properties.text + '</p><div style="clear: both"></div>'
			  
			  , {autoPanPadding: [5,55]}
			   );
          });
         })
		 
		 .addTo(map);
      </script>
	  
	   </body>
  </html>
